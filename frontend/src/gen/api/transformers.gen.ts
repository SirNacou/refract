// This file is auto-generated by @hey-api/openapi-ts

import type { DashboardResponse, ListUrlsResponse } from "./types.gen";

const urlSchemaResponseTransformer = (data: any) => {
	data.created_at = new Date(data.created_at);
	if (data.expires_at) {
		data.expires_at = new Date(data.expires_at);
	}
	data.updated_at = new Date(data.updated_at);
	return data;
};

const queryResponseSchemaResponseTransformer = (data: any) => {
	data.urls = data.urls.map((item: any) => urlSchemaResponseTransformer(item));
	return data;
};

export const listUrlsResponseTransformer = async (
	data: any,
): Promise<ListUrlsResponse> => {
	data = queryResponseSchemaResponseTransformer(data);
	return data;
};

const clickTrendSchemaResponseTransformer = (data: any) => {
	data.clicks = BigInt(data.clicks.toString());
	data.date = new Date(data.date);
	return data;
};

const recentActivitySchemaResponseTransformer = (data: any) => {
	data.timestamp = new Date(data.timestamp);
	return data;
};

const topUrlSchemaResponseTransformer = (data: any) => {
	data.clicks = BigInt(data.clicks.toString());
	data.this_week_trends = data.this_week_trends.map((item: any) =>
		clickTrendSchemaResponseTransformer(item),
	);
	return data;
};

const queryResultSchemaResponseTransformer = (data: any) => {
	data.active_urls = BigInt(data.active_urls.toString());
	data.click_trends = data.click_trends.map((item: any) =>
		clickTrendSchemaResponseTransformer(item),
	);
	data.clicks_this_week = BigInt(data.clicks_this_week.toString());
	data.recent_activities = data.recent_activities.map((item: any) =>
		recentActivitySchemaResponseTransformer(item),
	);
	data.top_urls = data.top_urls.map((item: any) =>
		topUrlSchemaResponseTransformer(item),
	);
	data.total_clicks = BigInt(data.total_clicks.toString());
	data.total_urls = BigInt(data.total_urls.toString());
	return data;
};

export const dashboardResponseTransformer = async (
	data: any,
): Promise<DashboardResponse> => {
	data = queryResultSchemaResponseTransformer(data);
	return data;
};
